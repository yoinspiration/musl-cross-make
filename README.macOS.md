# macOS 构建说明

## 自动处理的问题

构建脚本会自动处理以下 macOS 兼容性问题：

1. **SHA1 校验** - 自动使用 `shasum` 替代 `sha1sum`
2. **下载工具** - 如果没有 `wget`，自动使用 `curl`
3. **Make 版本** - 如果系统 make 版本太旧，自动使用 `gmake`
4. **内核头文件** - 在 macOS 上自动跳过（因为 sed 兼容性问题）

## 内核头文件

在 macOS 上，Linux 内核头文件的构建可能会失败（由于 sed 兼容性问题）。构建脚本会自动跳过内核头文件构建。

**内核头文件是可选的**，不影响工具链的基本功能。如果需要内核头文件，可以：

1. **在 Linux 系统上构建**（推荐）
2. **手动安装内核头文件**
3. **使用预编译的内核头文件**

## 手动启用内核头文件

如果确实需要内核头文件，可以：

1. 安装 GNU sed: `brew install gnu-sed`
2. 在 `config.mak` 中设置 `LINUX_VER = 6.7`
3. 设置环境变量使用 gsed: `export PATH="/usr/local/opt/gnu-sed/libexec/gnubin:$PATH"`

## 已知问题

- **sed 兼容性**: Linux 内核构建脚本使用 GNU sed 语法，与 macOS 的 BSD sed 不兼容
- **Make 版本**: 需要 GNU Make >= 3.82，脚本会自动检测并使用 `gmake`（如果可用）

## 建议

对于大多数用途，**不需要内核头文件**。工具链可以正常编译用户空间程序。只有在编译需要内核特定功能的程序时才需要内核头文件。

