# 构建指南

## 三种构建方式

### 1. 交互式菜单构建（推荐）⭐

最简单的方式，提供友好的菜单界面：

```bash
./build-interactive.sh
```

功能：
- 显示所有架构及构建状态
- 逐个选择架构进行构建
- 查看已构建的架构
- 测试工具链
- 构建所有未构建的架构

### 2. 单个架构构建

直接构建指定架构：

```bash
# 构建单个架构
./build-one.sh riscv64-linux-musl
./build-one.sh loongarch64-linux-musl
./build-one.sh x86_64-linux-musl
./build-one.sh aarch64-linux-musl
```

### 3. 批量构建所有架构

一次性构建所有架构（需要很长时间）：

```bash
./build-all.sh
```

## 推荐流程

### 第一次构建

1. **使用交互式菜单**：
   ```bash
   ./build-interactive.sh
   ```

2. **选择一个架构开始**（建议从 riscv64 开始，已验证可构建）

3. **等待构建完成**（30-60 分钟）

4. **测试工具链**：
   ```bash
   ./test-toolchain.sh
   ```

5. **继续构建其他架构**

### 后续构建

如果某个架构构建失败，可以：
- 使用 `./build-one.sh <架构>` 单独重新构建
- 或使用交互式菜单选择特定架构

## 架构说明

- **riscv64-linux-musl** - RISC-V 64位（已验证可构建）
- **loongarch64-linux-musl** - 龙芯架构 64位
- **x86_64-linux-musl** - x86 64位
- **aarch64-linux-musl** - ARM 64位

## 构建时间估算

- 单个架构：30-60 分钟
- 所有四个架构：2-4 小时

## 检查构建状态

```bash
# 查看已构建的架构
ls -d output-* 2>/dev/null || echo "还没有构建任何架构"
```

## 故障排除

如果构建失败：
1. 查看错误信息
2. 清理构建目录：`rm -rf build`
3. 重新构建：`./build-one.sh <架构>`

